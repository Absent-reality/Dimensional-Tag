<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="DimensionalTag.WorldsPage"
             BackgroundColor="Black" BackgroundImageSource="galaxy.png"
             NavigatedTo="OnArrival" NavigatedFrom="OnGoodbye">

    <StackLayout
              Padding="10"
              BackgroundColor="Transparent"
              Spacing="5">

        <Image x:Name="world_title"                           
               Source="worlds.png"             
               Margin="0,30,0,0"
               WidthRequest="300"
               HeightRequest="100">
            <Image.Shadow>
                <Shadow
                          Brush="Gray"
                          Offset="20,20"
                          Radius="20"
                          Opacity=".8" />
            </Image.Shadow>
        </Image>

        <Frame Padding="15" HeightRequest="260" IsClippedToBounds="True" BackgroundColor="Transparent" BorderColor="Transparent">
            <StackLayout Spacing="0">
                <CarouselView x:Name="World_Carousel" 
                              BackgroundColor="Transparent" 
                              PeekAreaInsets="70" 
                              CurrentItemChanged="world_carousel_CurrentItemChanged" 
                              HeightRequest="250" >
                    <CarouselView.ItemsLayout>
                        <LinearItemsLayout
                            Orientation="Horizontal"
                            SnapPointsAlignment="Center"
                            SnapPointsType="Mandatory"/>
                    </CarouselView.ItemsLayout>

                    <CarouselView.ItemTemplate>
                        <DataTemplate>
                            <StackLayout>

                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="PreviousItem">
                                            <VisualState.Setters>
                                                <Setter Property="Opacity"
                                                     Value=".5"/>
                                                <Setter Property="Scale"
                                                     Value=".75"/>
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState x:Name="CurrentItem">
                                            <VisualState.Setters>
                                                <Setter Property="Scale"
                                                     Value=".75" />
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState x:Name="NextItem">
                                            <VisualState.Setters>
                                                <Setter Property="Opacity"
                                                      Value=".5"/>
                                                <Setter Property="Scale"
                                                      Value=".75"/>
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState x:Name="DefaultItem">
                                            <VisualState.Setters>
                                                <Setter Property="Opacity"
                                                    Value=".25" />
                                                <Setter Property="Scale"
                                                    Value=".75"/>
                                            </VisualState.Setters>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <StackLayout BackgroundColor="Transparent" IsVisible="True" >
                                    <Frame
                                        BackgroundColor="Transparent"
                                        BorderColor="Transparent"
                                    Margin="5"
                                    Padding="0"
                                    CornerRadius="0"
                                    HasShadow="False"
                                    IsClippedToBounds="True">
                                        <Grid HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">

                                            <Image
                                                Source="world_blank.png" 
                                                Aspect="Center"
                                                HeightRequest="200"
                                                VerticalOptions="FillAndExpand"
                                                HorizontalOptions="FillAndExpand"/>

                                            <Label 
                                                x:Name="Lbl_WorldName"                                                                             
                                                BackgroundColor="Transparent"
                                                Text="{Binding UpdateSourceEventName=CurrentItem}"
                                                FontSize="Medium"
                                                FontAttributes="Bold"
                                                TextColor="White"                                               
                                                HorizontalTextAlignment="Center"
                                                HorizontalOptions="CenterAndExpand"
                                                VerticalOptions="EndAndExpand"
                                                />
                                        </Grid>
                                    </Frame>
                                </StackLayout>
                            </StackLayout>
                        </DataTemplate>
                    </CarouselView.ItemTemplate>
                </CarouselView>
            </StackLayout>
        </Frame>

        <Frame Padding="15" HeightRequest="280" IsClippedToBounds="True" BackgroundColor="Transparent" BorderColor="Transparent">
            <StackLayout Spacing="0">
                <CarouselView x:Name="Item_Carousel" 
                              BackgroundColor="Transparent" 
                              PeekAreaInsets="70" 
                              HeightRequest="180" >
                    <CarouselView.ItemsLayout>
                        <LinearItemsLayout
                              Orientation="Horizontal"
                              SnapPointsAlignment="Center"
                              SnapPointsType="Mandatory"/>
                    </CarouselView.ItemsLayout>

                    <CarouselView.ItemTemplate>
                        <DataTemplate>
                            <StackLayout>

                                <VisualStateManager.VisualStateGroups>
                                    <VisualStateGroup x:Name="CommonStates">
                                        <VisualState x:Name="PreviousItem">
                                            <VisualState.Setters>
                                                <Setter Property="Opacity"
                                                     Value=".5"/>
                                                <Setter Property="Scale"
                                                     Value=".75"/>
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState x:Name="CurrentItem">
                                            <VisualState.Setters>
                                                <Setter Property="Scale"
                                                     Value=".75" />
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState x:Name="NextItem">
                                            <VisualState.Setters>
                                                <Setter Property="Opacity"
                                                      Value=".5"/>
                                                <Setter Property="Scale"
                                                      Value=".75"/>
                                            </VisualState.Setters>
                                        </VisualState>

                                        <VisualState x:Name="DefaultItem">
                                            <VisualState.Setters>
                                                <Setter Property="Opacity"
                                                    Value=".25" />
                                                <Setter Property="Scale"
                                                    Value=".75"/>
                                            </VisualState.Setters>
                                        </VisualState>
                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                                <StackLayout BackgroundColor="Transparent" IsVisible="True" >
                                    <Frame
                                        BackgroundColor="Transparent"
                                        BorderColor="Transparent"
                                    Margin="5"
                                    Padding="0"
                                    CornerRadius="0"
                                    HasShadow="False"
                                    IsClippedToBounds="True">
                                        <Grid HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand" >
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="140*" />
                                                <RowDefinition Height="120*" />
                                            </Grid.RowDefinitions>
                                            
                                            <Image
                                                Grid.Row="0"
                                                Source="char_ico.png"
                                                Aspect="Fill"
                                                HeightRequest="130"  
                                                WidthRequest="130"
                                                
                                                VerticalOptions="StartAndExpand"
                                                HorizontalOptions="CenterAndExpand"/>

                                            <Label                                                 
                                                x:Name="Lbl_Name"  
                                                Grid.Row="1"
                                                BackgroundColor="Transparent"
                                                Text="{Binding UpdateSourceEventName=CurrentItem}"
                                                FontSize="Medium"
                                                FontAttributes="Bold"
                                                TextColor="White"                                               
                                                HorizontalTextAlignment="Center"                                                
                                                HorizontalOptions="CenterAndExpand"
                                                VerticalOptions="CenterAndExpand"
                                                HeightRequest="120"
                                                
                                                />
                                        </Grid>
                                    </Frame>
                                </StackLayout>
                            </StackLayout>
                        </DataTemplate>
                    </CarouselView.ItemTemplate>
                </CarouselView>
            </StackLayout>
        </Frame>
    </StackLayout>
</ContentPage>